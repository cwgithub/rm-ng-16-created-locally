<div class="container">
  <div class="buttons">
    <button type="button" mat-button (click)="loadSectionSpec(1)">
      Load Section 1
    </button>

    @if (currentSectionSpec) {
      <button type="button" mat-button (click)="previousQuestion()">
        Previous
      </button>
      <button type="button" mat-button (click)="nextQuestion()">Next</button>
      <button type="button" mat-button (click)="finishTest()">
        Finish Test
      </button>
    }
  </div>

  <div class="question-container">
    @if (currentSectionSpec) {
      <div class="question-number">
        Question {{ currentQuestionNumber }}, Section
        {{ currentSectionSpec.sectionName }}
      </div>
      <div [innerHTML]="html"></div>

      @if (currentQuestionSpec?.gizmoType) {
        @switch (currentQuestionSpec?.gizmoType) {
          @case ("drag-and-drop") {
            <app-drag-and-drop-gizmo
              [dragImages]="currentQuestionSpec?.draggables"
              [dropImage]="currentQuestionSpec?.droppable"
              (answerEvent)="onAnswerEvent($event)"
              [answerData]="answerData"
            ></app-drag-and-drop-gizmo>
          }
          @case ("multiple-choice-list") {
            <app-multiple-choice-list-gizmo
              [options]="currentQuestionSpec?.options"
              (answerEvent)="onAnswerEvent($event)"
              [answerData]="answerData"
            ></app-multiple-choice-list-gizmo>
          }
          <!-- [optionsData]="loadJsonFile(currentQuestionSpec?.optionsDataFile) | async" -->
          @case ("multi-multi") {
            <app-multi-multi-gizmo
              [optionsData]="optionsData"
              (answerEvent)="onAnswerEvent($event)"
              [answerData]="answerData"
            ></app-multi-multi-gizmo>
          }
        }
      }
    }
  </div>

  @if (isCorrect(currentQuestionSpec?.questionNumber) === true) {
    <mat-icon
      class="icon-display"
      aria-hidden="false"
      aria-label="Example home icon"
      fontIcon="done"
    ></mat-icon>
  } @else if (isCorrect(currentQuestionSpec?.questionNumber) === false) {
    <mat-icon
      class="icon-display"
      aria-label="Example home icon"
      fontIcon="close"
    ></mat-icon>
  }
</div>

<div class="footer">
  <app-question-nav
    [userId]="userId"
    [assessmentId]="currentAssessmentSpec?.assessmentId"
    [sectionSpec]="currentSectionSpec"
    [currentQuestionNumber]="currentQuestionSpec?.questionNumber"
    (questionClickEvent)="onQuestionNavQuestionClicked($event)"
  ></app-question-nav>
</div>
